# Google Optimize Next テストページ

このプロジェクトには、Google Optimize NextがNext.jsのページ遷移によるDOM再構築に対応できるかをテストするためのページが含まれています。

## テストページ一覧

### 1. ハイドレーションテストページ (`/hydration-test`)
- **レンダリング方式**: クライアントサイドレンダリング (CSR)
- **特徴**: 
  - `'use client'` ディレクティブ使用
  - useState/useEffectによるハイドレーション
  - リアルタイムでのDOM更新
  - インタラクティブな要素（カウンター、時刻表示）
  - 動的なコンテンツ変更

### 2. SSGテストページ (`/ssg-test`)
- **レンダリング方式**: 静的サイト生成 (SSG)
- **特徴**:
  - ビルド時に静的生成
  - サーバーサイドレンダリングなし
  - 完全に静的なHTML
  - 高速な読み込み
  - SEO最適化

### 3. 記事一覧ページ (`/articles`)
- **レンダリング方式**: 静的サイト生成 (SSG)
- **特徴**:
  - ビルド時に全記事が静的生成
  - メタデータも静的に生成
  - フィルタリング機能なし（静的コンテンツ）

### 4. 求人一覧ページ (`/jobs`)
- **レンダリング方式**: サーバーサイドレンダリング (SSR)
- **特徴**:
  - サーバーサイドでデータフィルタリング
  - クライアントコンポーネントとの組み合わせ
  - 動的な検索・フィルター機能

### 5. トップページ (`/`)
- **レンダリング方式**: 静的サイト生成 (SSG)
- **特徴**:
  - ビルド時に静的生成
  - 固定コンテンツ
  - テスト用ナビゲーションリンク付き

## テストシナリオ

### シナリオ1: ハイドレーション → SSG
1. `/hydration-test` にアクセス
2. カウンターを操作してDOM更新を確認
3. `/ssg-test` に遷移
4. Optimize Nextが静的ページの遷移を正しく検知するか確認

### シナリオ2: SSG → SSR
1. `/ssg-test` にアクセス
2. `/jobs` に遷移
3. 検索機能を使用して動的コンテンツを確認
4. Optimize Nextがサーバーサイドレンダリングページの遷移を正しく検知するか確認

### シナリオ3: SSR → ハイドレーション
1. `/jobs` にアクセス
2. 検索・フィルター機能を使用
3. `/hydration-test` に遷移
4. クライアントサイドの動的更新を確認
5. Optimize Nextがハイドレーションを正しく検知するか確認

## 期待される動作

### Optimize Nextが正しく動作する場合:
- ページ遷移時にDOMの再構築を検知
- 各ページのレンダリング方式に関係なく一貫した動作
- ハイドレーション時のDOM更新も正しく追跡

### 問題が発生する可能性のあるケース:
- ハイドレーション時のDOM更新が検知されない
- SSGページ間の遷移で問題が発生
- SSRページの動的コンテンツ更新が追跡できない

## 技術的な詳細

### ハイドレーションが起きる要素:
- リアルタイムカウンター
- 現在時刻の表示（1秒ごと更新）
- ランダムな背景色の生成
- クライアントサイドの状態管理

### 静的生成される要素:
- 記事一覧の全コンテンツ
- SSGテストページの全コンテンツ
- トップページの基本コンテンツ

### サーバーサイドレンダリングされる要素:
- 求人一覧のフィルタリング結果
- 検索結果の動的生成
- ページネーション

## テスト手順

1. 各テストページにアクセスして動作確認
2. ページ間の遷移をテスト
3. ハイドレーション機能をテスト
4. Google Optimize Nextでテストを実行
5. 結果を分析して問題点を特定

## 注意事項

- テストページは本番環境用ではありません
- 実際のテストでは適切なセキュリティ設定を行ってください
- Optimize Nextの設定は別途必要です 